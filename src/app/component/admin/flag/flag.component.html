<div class="flex bg-cover bg-center  h-full  "
    style=" background-image: url('../../../../assets/image/admindashboard.png'); ">
    <app-navsidebar></app-navsidebar>
    <main class=" min-w-0 flex-1 overflow-auto pt-28 ml-96 ">

        <!-- table -->


        <table
            class="w-5/6 text-sm text-left border-3 brightness-95 border-green-50  text-gray-500 dark:text-gray-400 ">
            <thead class="text-xs  text-white uppercase   bg-pink-600 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        No
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Post Owrner
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Post Date
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Flag Count
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Status
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Post
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Flag Reason
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Action
                    </th>
                    <!-- <th scope="col" class="px-6 py-3">
             <span class="sr-only">Edit</span>
         </th> -->
                </tr>
            </thead>
            <ng-container *ngIf="loadingspinner==true">
                <div class="ml-96">
                    <app-loading-spinner></app-loading-spinner>
                </div>
            </ng-container>
            <tbody *ngFor="let item of flagPost;let i=index">

                <ng-container *ngIf="loadingspinner==false">
                    <tr
                        class=" bg-white border-b dark:bg-gray-800  dark:border-gray-700 hover:bg-orange-50 dark:hover:bg-gray-600">
                        <td class="px-6 py-4 text-gray-900 font-medium ">
                            {{i+1}}
                        </td>
                        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                            <!-- {{item.content}} -->
                            {{item.user?.name}}

                            <!-- <a routerLink=" (click)="openModal()" ">Product Detail</a> -->
                        </td>
                        <td class="px-6 py-4 text-gray-900 font-medium ">
                            {{item?.timestamp|date:'MM/d/yyy'}}
                        </td>
                        <!-- <ng-container *ngFor="let rslt of item.flags"> -->
                        <td class="px-6 py-4 text-gray-900 font-medium">

                            {{item?.flagsCount}}

                        </td>
                        <!-- </ng-container> -->
                        <td class="px-6 py-4 text-gray-900 font-medium">
                            <ng-container *ngIf="item.block==false">
                                <span
                                    class="inline-flex items-center justify-center rounded-full bg-emerald-100 px-2.5 py-0.5 text-emerald-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="-ms-1 me-1.5 h-4 w-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>

                                    <p class="whitespace-nowrap text-sm">Active</p>
                                </span>

                            </ng-container>
                            <ng-container *ngIf="item.block==true">
                                <span
                                    class="inline-flex items-center justify-center rounded-full bg-red-100 px-2.5 py-0.5 text-red-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="-ms-1 me-1.5 h-4 w-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                                    </svg>

                                    <p class="whitespace-nowrap text-sm">Blocked</p>
                                </span>
                            </ng-container>

                        </td>
                        <td class="px-6 py-4 text-gray-900 font-medium">
                            <button class="bg-transparent brightness-50 py-2 rounded-md px-3 text-sm hover:scale-125  "
                                p-tooltip-text="view post" (click)="openModal1(item._id)">

                                <svg class="w-5 h-5  text-gray-800 dark:text-white" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">
                                    <path fill="currentColor"
                                        d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z" />
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M18 1H2a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z" />
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z" />
                                </svg>
                                <!-- style="width: 1.5rem"  -->

                            </button><br>
                            <a class="-mt-5 pt-0 text-xs ">view post</a>





                        </td>
                        <td class="px-6 py-4 text-gray-900 font-medium">
                            <button class=" ml-5 bg-transparent  brightness-50 py-2 text-sm hover:scale-125 "
                                (click)="openModal2(item._id)">
                                <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M1 1v18M1 3.652v9c5.6-5.223 8.4 2.49 14-.08v-9c-5.6 2.57-8.4-5.143-14 .08Z" />
                                </svg>
                            </button> <br>
                            <a class="-mt-5 pt-0 text-xs ">view report</a>
                        </td>
                        <!-- <a
                        class="text-blue-600 ">view
                        flags</a> -->



                        <td class="px-6 py-4">



                            <!-- drop down -->
                            <div x-data="{ isActive: false }" class="relative">


                                <button x-on:click="isActive = !isActive"
                                    class="h-full rounded-md  px-3 py-1.5  text-white bg-orange-400  hover:bg-orange-700  flex space-x-1">
                                    <span class="font-medium rounded-md text-xs mt-[2px]">Action</span>
                                    <span class="space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 "
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                clip-rule="evenodd" />
                                        </svg></span>

                                </button>


                                <div class="absolute end-0 z-10 mt-2 w-40 rounded-md border border-gray-100 bg-white shadow-lg"
                                    role="menu" x-cloak x-transition x-show="isActive"
                                    x-on:click.away="isActive = false" x-on:keydown.escape.window="isActive = false">
                                    <div class="p-2">
                                        <a (click)="sendWarningMail(item.user._id,item._id)"
                                            class="block rounded-lg px-4 py-2 text-sm cursor-pointer text-black hover:bg-gray-50 hover:text-gray-700"
                                            role="menuitem">
                                            Warning Mail

                                        </a>

                                        <a (click)="blockPost(item.user._id,item._id)"
                                            class="block rounded-lg px-4 py-2 text-sm cursor-pointer text-black hover:bg-gray-50 hover:text-gray-700"
                                            role="menuitem">
                                            {{item.block ==true ? "Unblock Post" : "Block Post " }}

                                        </a>
                                        <a (click)="suspendUser(item.user._id)"
                                            class="block rounded-lg px-4 py-2 text-sm cursor-pointer text-black hover:bg-gray-50 hover:text-gray-700"
                                            role="menuitem">
                                            Suspend User
                                        </a>
                                    </div>
                                </div>
                            </div>


                        </td>

                    </tr>
                </ng-container>

            </tbody>

        </table>


        <!-- table end -->
        <!-- <div class="max-w-xl mx-auto">
            <div class="bg-white shadow-lg rounded-lg overflow-hidden">
                <img src="https://via.placeholder.com/800x400" alt="Post Image"
                    class="w-full h-64 object-cover object-center">
                <div class="p-6">
                    <h2 class="text-2xl font-semibold text-gray-800">Post Title</h2>
                    <p class="text-gray-600 mt-2">Posted by John Doe on October 11, 2023</p>
                    <p class="text-gray-700 mt-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque
                        hendrerit malesuada semper. Curabitur sed rhoncus leo. Sed vel arcu non nisi gravida fringilla
                        in in nunc. Pellentesque varius eros quis facilisis. Nullam dapibus euismod erat vel ultricies.
                        Sed nec urna non justo bibendum volutpat.</p>
                    <div class="mt-4">
                        <a href="#" class="text-indigo-600 hover:underline">Read More</a>
                    </div>
                </div>
            </div>
        </div> -->

        <!-- modal 1 -->


        <div class="fixed z-10 inset-0 overflow-y-auto flex justify-center " [ngClass]="{'hidden': !modalOpen1}">
            <div class="flex items-end justify-center h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <!-- Background overlay -->
                <div class="fixed inset-0 transition-opacity" (click)="closeModal1()">
                    <div class="absolute inset-0 bg-black opacity-50"></div>
                </div>

                <!-- Modal panel -->
                <div *ngIf="thoughts"
                    class="modal-container bg-white rounded-lg shadow-lg transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                    <!-- Modal content -->
                    <div class="flex justify-center">
                        <div class="w-full max-w-md p-4 sm:w-[500px]">
                            <div class="flex justify-end mb-4">
                                <button class="btn-primary" (click)="closeModal1()">
                                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m13 7-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="bg-white shadow rounded-lg p-6 sm:p-10">
                                <!-- starting of thoughts -->
                                <p-card>
                                    <div class="flex mb-3">
                                        <div class="flex flex-wrap space-x-2">
                                            <ng-container *ngFor="let item of thoughts.post.tags">
                                                <p-tag class="mr-2 mb-2"
                                                    [style]="{ 'background': 'linear-gradient(-225deg,#AC32E4 0%,#7918F2 48%,#4801FF 100%)'}">
                                                    <div class="flex items-center">
                                                        <span class="text-xs font-medium">{{item}}</span>
                                                    </div>
                                                </p-tag>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="flex items-center mb-3">
                                        <img class="w-8 h-8 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500" src="/docs/images/people/profile-picture-5.jpg" alt="Bordered avatar">
                                        <div class="ml-3">
                                            <p class="text-sm font-bold">{{thoughts.post.user?.name}}</p>
                                            <p class="text-xs font-medium text-slate-500">
                                                <span>{{thoughts.post?.timestamp | date:'MMM d'}}</span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <p>{{thoughts.post.content}}</p>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button (click)="AddLike()" class="flex items-center space-x-1">
                                            <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 21 19">
                                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M11 4C5.5-1.5-1.5 5.5 4 11l7 7 7-7c5.458-5.458-1.542-12.458-7-7Z" />
                                            </svg>
                                            <span class="text-sm text-gray-800">{{thoughts.likeCount}}</span>
                                        </button>
                                        <button (click)="showComment()" class="flex items-center space-x-1">
                                            <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">
                                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m1 14 3-3m-3 3 3 3m-3-3h16v-3m2-7-3 3m3-3-3-3m3 3H3v3" />
                                            </svg>
                                            <span class="text-sm text-gray-800">{{thoughts.commentCount}}</span>
                                        </button>
                                    </div>
                                </p-card>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- modal 2 -->
        <ng-container *ngIf="thoughts">
            <div class="fixed z-10 inset-0 overflow-y-auto flex justify-center " [ngClass]="{'hidden': !modalOpen2}">
                <div class="flex items-end justify-center h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <!-- Background overlay -->
                    <div class="fixed inset-0 transition-opacity" (click)="closeModal2()">
                        <div class="absolute inset-0  bg-black opacity-50"></div>
                    </div>

                    <!-- Modal panel -->
                    <div class="modal-container  x sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">

                        <!-- Modal content -->
                        <div class="p-36">
                            <!-- close button for modal -->
                            <!-- <div class=" ml-[160%] mb-2 pb-2">
                                <button class="btn-primary mt-4" (click)="closeModal2()"><svg
                                        class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="1" d="m13 7-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg></button>
                            </div> -->
                            <table
                                class="w-5/6 text-sm text-left border-3 brightness-95 border-green-50  text-gray-500 dark:text-gray-400 ">
                                <thead
                                    class="text-xs  text-white uppercase   bg-pink-600 dark:bg-gray-700 dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            No
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            User
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Date
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Reason
                                        </th>

                                        <!-- <th scope="col" class="px-6 py-3">
                         <span class="sr-only">Edit</span>
                     </th> -->
                                    </tr>
                                </thead>
                                <tbody *ngFor=" let item of thoughts.post.flags;let i=index">

                                    <tr
                                        class=" bg-white border-b dark:bg-gray-800  dark:border-gray-700 hover:bg-orange-50 dark:hover:bg-gray-600">
                                        <td class="px-6 py-4 text-gray-900 font-medium ">
                                            {{i+1}}
                                        </td>
                                        <td
                                            class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                            {{item.user.name}}
                                        </td>
                                        <td
                                            class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                            {{item.timestamp|date:'MMM d yyy'}}
                                        </td>
                                        <ng-container *ngIf="item.reason.report=='other'">
                                            <td class="px-6 py-4 text-gray-900 font-medium ">
                                                {{item.reason.reason}}
                                            </td>
                                        </ng-container>
                                        <ng-container *ngIf="item.reason.report!='other'">
                                            <td class="px-6 py-4 text-gray-900 font-medium ">
                                                {{item.reason.report}}
                                            </td>
                                        </ng-container>
                                        <!-- <ng-container *ngFor="let rslt of item.flags"> -->


                                    </tr>


                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </ng-container>





    </main>
</div>